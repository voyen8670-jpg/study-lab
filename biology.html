<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Study Lab ‚Äî Th√≠ nghi·ªám Sinh h·ªçc</title>

    <style>
      :root {
        --accent: #00ff88;
        --card-bg: rgba(0, 0, 0, 0.6);
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        background: #001000;
        color: #fff;
        font-family: Arial, sans-serif;
        text-align: center;
        min-height: 100vh;
        padding-bottom: 40px;
        overflow-x: hidden;
      }

      canvas#bg {
        position: fixed;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        display: block;
      }

      header {
        padding: 24px 16px 8px;
      }

      h1 {
        font-size: 32px;
        text-shadow: 0 0 10px var(--accent);
      }

      .controls {
        margin-top: 12px;
        display: flex;
        gap: 12px;
        justify-content: center;
        flex-wrap: wrap;
      }

      input#search,
      select#filter,
      select#grade {
        padding: 12px 16px;
        border-radius: 10px;
        border: 1px solid rgba(0, 255, 153, 0.4);
        background: rgba(0, 0, 0, 0.5);
        color: #fff;
        min-width: 220px;
        font-size: 15px;
        outline: none;
        box-shadow: 0 0 8px rgba(0, 255, 153, 0.2);
        transition: box-shadow 0.3s, border 0.3s;
      }

      select option {
        background: #002000;
      }

      main.wrap {
        max-width: 1100px;
        margin: 28px auto;
        padding: 0 16px;
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 24px;
      }

      .card {
        background: var(--card-bg);
        padding: 25px;
        border-radius: 15px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.7);
        transition: 0.3s;
        cursor: pointer;
        text-align: center;
      }

      .card:hover {
        transform: translateY(-10px) scale(1.05);
        box-shadow: 0 8px 30px rgba(0, 255, 153, 0.8);
      }

      .icon-wrap {
        font-size: 60px;
        margin-bottom: 15px;
        display: inline-block;
        filter: drop-shadow(0 0 6px rgba(0, 255, 153, 0.6));
        transition: 0.3s;
      }

      .card:hover .icon-wrap {
        transform: scale(1.2);
        filter: drop-shadow(0 0 12px rgba(0, 255, 153, 1));
      }

      h2 {
        font-size: 20px;
        margin: 8px 0 6px;
        color: var(--accent);
        text-shadow: 0 0 6px rgba(0, 255, 153, 0.7);
      }

      p {
        font-size: 14px;
        color: #ddd;
      }

      footer {
        margin-top: 24px;
        padding: 12px;
      }

      a.back {
        color: #000;
        background: var(--accent);
        padding: 8px 14px;
        border-radius: 8px;
        text-decoration: none;
      }
    </style>
  </head>

  <body>
    <canvas id="bg"></canvas>

    <header>
      <h1>üß¨ Study Lab ‚Äî Th√≠ nghi·ªám Sinh h·ªçc</h1>

      <div class="controls">
        <input id="search" placeholder="T√¨m ki·∫øm m√¥ ph·ªèng..." />
        <select id="filter">
          <option value="all">T·∫•t c·∫£ ch·ªß ƒë·ªÅ</option>
          <option value="te-bao">T·∫ø b√†o h·ªçc</option>
          <option value="sinh-ly">Sinh l√Ω h·ªçc</option>
          <option value="vi-sinh">Vi sinh h·ªçc</option>
          <option value="sinh-thai">Sinh th√°i</option>
          <option value="di-truyen">Di truy·ªÅn</option>
        </select>

        <select id="grade">
          <option value="all">T·∫•t c·∫£ kh·ªëi</option>
          <option value="10">Kh·ªëi 10</option>
          <option value="11">Kh·ªëi 11</option>
          <option value="12">Kh·ªëi 12</option>
        </select>
      </div>
    </header>

    <main class="wrap">
      <div id="simulations" class="grid"></div>
    </main>

    <footer>
      <a href="menu.html" class="back">‚¨Ö Quay l·∫°i</a>
    </footer>

    <script>
      const ICONS = {
        1: `
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 96 96" width="96" height="96">
        <ellipse cx="48" cy="48" rx="40" ry="30" fill="#c5e1a5" stroke="#558b2f" stroke-width="3"/>
        <ellipse cx="48" cy="48" rx="35" ry="25" fill="rgba(255,255,255,0.2)"/>
        <ellipse cx="48" cy="48" rx="12" ry="10" fill="#6a1b9a" stroke="#4a148c" stroke-width="2"/>
      </svg>
    `,

        2: `
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 96 96" width="96" height="96">
        <rect x="32" y="10" width="32" height="60" rx="4" fill="#eee" stroke="#333" stroke-width="2"/>
        <defs>
          <linearGradient id="starch" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#fffde7"/>
            <stop offset="100%" stop-color="#fff59d"/>
          </linearGradient>
        </defs>
        <rect x="34" y="40" width="28" height="28" rx="3" fill="url(#starch)"/>
      </svg>
    `,

        3: `
      <svg viewBox="0 0 100 100" width="80" height="80" xmlns="http://www.w3.org/2000/svg">
        <circle cx="50" cy="50" r="45" fill="none" stroke="#999" stroke-width="2"/>
        <circle cx="50" cy="50" r="35" fill="none" stroke="#ffb86b" stroke-width="3"/>
        <circle cx="50" cy="50" r="25" fill="rgba(96,165,250,0.6)" stroke="#5fb0e6" stroke-width="1"/>
      </svg>
    `,

        4: `
      <svg width="90" height="90" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
        <circle cx="50" cy="50" r="45" fill="#003300" stroke="#00ff99" stroke-width="3"/>
        <text x="50" y="32" text-anchor="middle" font-size="16" fill="#00ff99">üå±</text>
        <text x="50" y="55" text-anchor="middle" font-size="18">üêá</text>
        <text x="50" y="80" text-anchor="middle" font-size="18">ü¶ä</text>
      </svg>
    `,

        5: `
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 96 96" width="96" height="96">
        <!-- N·ªÅn -->
        <ellipse cx="48" cy="48" rx="40" ry="30" fill="#ffe0b2" stroke="#ef6c00" stroke-width="3"/>
        <ellipse cx="48" cy="48" rx="36" ry="26" fill="rgba(255,255,255,0.25)"/>

        <g transform="translate(48 48) rotate(-25)">
          <rect x="-18" y="-8" width="16" height="16" rx="8"
                fill="#4dd0e1" stroke="#00838f" stroke-width="2"/>
          <rect x="-2" y="-8" width="20" height="16" rx="8"
                fill="#ffab91" stroke="#d84315" stroke-width="2"/>
        </g>

        <ellipse cx="30" cy="40" rx="6" ry="3" fill="#a5d6a7" stroke="#2e7d32" stroke-width="2" />
        <ellipse cx="67" cy="57" rx="6" ry="3" fill="#ef9a9a" stroke="#c62828" stroke-width="2" />
      </svg>
    `,

        6: `
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 96 96" width="96" height="96">
        <defs>
          <linearGradient id="mendelBg" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stop-color="#312e81"/>
            <stop offset="100%" stop-color="#1e293b"/>
          </linearGradient>
        </defs>

        <circle cx="48" cy="48" r="40" fill="url(#mendelBg)"/>

        <circle cx="48" cy="48" r="30"
                fill="none" stroke="rgba(148,163,184,0.6)" stroke-width="2"/>

        <g transform="translate(48 36)">
          <rect x="-1.5" y="-10" width="3" height="20" rx="1.5"
                fill="#e5e7eb" opacity="0.7"/>
          <text x="-10" y="2" text-anchor="middle"
                font-size="14" font-weight="700"
                fill="#fbbf24" font-family="system-ui, -apple-system, sans-serif">
            A
          </text>
          <text x="10" y="3" text-anchor="middle"
                font-size="11" font-weight="600"
                fill="#a5b4fc" font-family="system-ui, -apple-system, sans-serif">
            a
          </text>
        </g>

        <defs>
          <radialGradient id="peaSmooth1" cx="30%" cy="30%" r="70%">
            <stop offset="0%" stop-color="#fef9c3"/>
            <stop offset="50%" stop-color="#fde047"/>
            <stop offset="100%" stop-color="#d97706"/>
          </radialGradient>
          <radialGradient id="peaSmooth2" cx="35%" cy="30%" r="70%">
            <stop offset="0%" stop-color="#fef9c3"/>
            <stop offset="50%" stop-color="#facc15"/>
            <stop offset="100%" stop-color="#c2410c"/>
          </radialGradient>
          <radialGradient id="peaWrinkledMini" cx="40%" cy="35%" r="70%">
            <stop offset="0%" stop-color="#e9fbe7"/>
            <stop offset="50%" stop-color="#86efac"/>
            <stop offset="100%" stop-color="#22c55e"/>
          </radialGradient>
        </defs>

        <g transform="translate(32 63)">
          <ellipse cx="0" cy="0" rx="8.5" ry="6"
                   fill="url(#peaSmooth1)" stroke="#92400e" stroke-width="1.2"/>
        </g>

        <g transform="translate(48 64)">
          <path d="
            M-7,-2
            C-7,-6  -2,-8   3,-7
            C 7,-6  8,-2   7,2
            C 6,6   2,8   -3,7
            C-6,6   -7,3  -7,-2 Z"
            fill="url(#peaWrinkledMini)" stroke="#166534" stroke-width="1.2"/>
          <path d="M-6,-1 C-2,-3 2,-3 6,-1"
                stroke="rgba(0,0,0,0.25)" stroke-width="1" fill="none"/>
          <path d="M-5,2 C-1,1 1,1 5,2"
                stroke="rgba(0,0,0,0.22)" stroke-width="0.9" fill="none"/>
        </g>

        <g transform="translate(64 63)">
          <ellipse cx="0" cy="0" rx="8.5" ry="6"
                   fill="url(#peaSmooth2)" stroke="#b45309" stroke-width="1.2"/>
        </g>

        <g transform="translate(48 74)">
          <rect x="-10" y="0.5" width="8" height="2" rx="1" fill="#facc15" opacity="0.9"/>
          <rect x="2" y="0.5" width="4" height="2" rx="1" fill="#22c55e" opacity="0.9"/>
        </g>
      </svg>
    `,

        7: `
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 96 96" width="96" height="96">
        <!-- N·ªÅn gradient -->
        <defs>
          <linearGradient id="parentBg" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stop-color="#311b92"/>
            <stop offset="100%" stop-color="#1e293b"/>
          </linearGradient>
        </defs>
        <circle cx="48" cy="48" r="40" fill="url(#parentBg)" />

        <!-- V√≤ng m·ªù -->
        <circle cx="48" cy="48" r="30" fill="none"
                stroke="rgba(148,163,184,0.7)" stroke-width="2"/>

        <!-- C·∫∑p allele A / a -->
        <g transform="translate(32 40)">
          <rect x="-3" y="-14" width="6" height="28" rx="3"
                fill="#c5e1a5" stroke="#558b2f" stroke-width="1.5"/>
          <text x="10" y="-4" text-anchor="middle"
                font-size="16" font-weight="700" fill="#fbbf24"
                font-family="system-ui, -apple-system, sans-serif">A</text>
          <text x="10" y="12" text-anchor="middle"
                font-size="13" font-weight="600" fill="#a5b4fc"
                font-family="system-ui, -apple-system, sans-serif">a</text>
        </g>

        <!-- C·∫∑p allele B / b -->
        <g transform="translate(62 52)">
          <rect x="-3" y="-14" width="6" height="28" rx="3"
                fill="#b3e5fc" stroke="#0277bd" stroke-width="1.5"/>
          <text x="-10" y="-4" text-anchor="middle"
                font-size="16" font-weight="700" fill="#f97316"
                font-family="system-ui, -apple-system, sans-serif">B</text>
          <text x="-10" y="12" text-anchor="middle"
                font-size="13" font-weight="600" fill="#fca5a5"
                font-family="system-ui, -apple-system, sans-serif">b</text>
        </g>
      </svg>
    `,
      };

      const data = [
        {
          title: "T·∫ø b√†o h√†nh d∆∞·ªõi k√≠nh hi·ªÉn vi",
          desc: "Quan s√°t s·ª± thay ƒë·ªïi c·ªßa nh√¢n t·∫ø b√†o.",
          icon: ICONS["1"],
          link: "1_biology.html",
          topic: "te-bao",
          grade: "10",
        },
        {
          title: "Amylase th·ªßy ph√¢n tinh b·ªôt",
          desc: "Ph√¢n gi·∫£i tinh b·ªôt th√†nh ƒë∆∞·ªùng ƒë∆°n.",
          icon: ICONS["2"],
          link: "2_biology.html",
          topic: "sinh-ly",
          grade: "11",
        },
        {
          title: "Co nguy√™n sinh ·ªü t·∫ø b√†o bi·ªÉu b√¨ h√†nh",
          desc: "Quan s√°t s·ª± co nguy√™n sinh v√† th·∫©m th·∫•u.",
          icon: ICONS["3"],
          link: "3_biology.html",
          topic: "sinh-ly",
          grade: "10",
        },
        {
          title: "Chu·ªói th·ª©c ƒÉn: C·ªè ‚Äì Th·ªè ‚Äì C√°o",
          desc: "ƒêi·ªÅu ch·ªânh c√°c tham s·ªë sinh th√°i ƒë·ªÉ quan s√°t tƒÉng tr∆∞·ªüng, dao ƒë·ªông v√† tuy·ªát ch·ªßng qu·∫ßn th·ªÉ.",
          icon: ICONS["4"],
          link: "4_biology.html",
          topic: "sinh-thai",
          grade: "11",
        },
        {
          title: "T√°c ƒë·ªông c·ªßa thu·ªëc kh√°ng sinh",
          desc: "Quan s√°t ·∫£nh h∆∞·ªüng c·ªßa kh√°ng sinh l√™n vi khu·∫©n nh·∫°y thu·ªëc v√† kh√°ng thu·ªëc.",
          icon: ICONS["5"],
          link: "5_biology.html",
          topic: "vi-sinh",
          grade: "10",
        },
        {
          title: "Lai gi·ªëng Mendel (A/a)",
          desc: "M√¥ ph·ªèng lai 1 c·∫∑p gen v√† th·ªëng k√™ t·ªâ l·ªá ki·ªÉu gen ‚Äì ki·ªÉu h√¨nh v√† ƒë·ªëi chi·∫øu v·ªõi b·∫£ng Punnett.",
          icon: ICONS["6"],
          link: "6_biology.html",
          topic: "di-truyen",
          grade: "10",
        },
        {
          title: "Lai gi·ªëng Mendel (A/a & B/b)",
          desc: "M√¥ ph·ªèng lai 2 c·∫∑p gen (AaBb) ‚Äì th·ªëng k√™ ki·ªÉu gen, ki·ªÉu h√¨nh, quan s√°t t·ªâ l·ªá 9 : 3 : 3 : 1 v√† b·∫£ng Punnett.",
          icon: ICONS["7"],
          link: "7_biology.html",
          topic: "di-truyen",
          grade: "12",
        },
      ];

      const container = document.getElementById("simulations");

      function render(list) {
        container.innerHTML = "";
        list.forEach((sim) => {
          const card = document.createElement("div");
          card.className = "card";
          card.innerHTML = `
                        <div class="icon-wrap">${sim.icon}</div>
                        <h2>${sim.title}</h2>
                        <p>${sim.desc}</p>
                      `;
          card.onclick = () => (window.location.href = sim.link);
          container.appendChild(card);
        });
      }
      render(data);

      /* ---------------- T√åM KI·∫æM + L·ªåC ---------------- */
      const searchEl = document.getElementById("search");
      const filterEl = document.getElementById("filter");
      const gradeEl = document.getElementById("grade");

      function normalizeVN(str) {
        return str
          .normalize("NFD")
          .replace(/[\u0300-\u036f]/g, "")
          .toLowerCase();
      }

      function updateList() {
        const q = normalizeVN(searchEl.value);
        const f = filterEl.value;
        const g = gradeEl.value;

        const out = data.filter((s) => {
          const text = normalizeVN(s.title + s.desc);
          const okQ = !q || text.includes(q);
          const okF = f === "all" || s.topic === f;
          const okG = g === "all" || s.grade === g;
          return okQ && okF && okG;
        });

        render(out);
      }

      [searchEl, filterEl, gradeEl].forEach((el) =>
        el.addEventListener("input", updateList)
      );

      /* ---------------- N·ªÄN SAO ---------------- */
      const canvas = document.getElementById("bg");
      const ctx = canvas.getContext("2d");
      let W = innerWidth,
        H = innerHeight;
      let stars = [];

      function fit() {
        const dpr = window.devicePixelRatio || 1;
        canvas.width = innerWidth * dpr;
        canvas.height = innerHeight * dpr;
        canvas.style.width = innerWidth + "px";
        canvas.style.height = innerHeight + "px";
        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);

        W = innerWidth;
        H = innerHeight;

        initStars();
        drawStatic();
      }

      function initStars() {
        stars = Array.from({ length: 80 }, () => ({
          x: Math.random() * W,
          y: Math.random() * H,
          r: Math.random() * 1.6 + 0.6,
        }));
      }

      function drawStatic() {
        ctx.clearRect(0, 0, W, H);

        const g = ctx.createRadialGradient(
          W / 2,
          H / 2,
          60,
          W / 2,
          H / 2,
          Math.max(W, H) * 0.8
        );
        g.addColorStop(0, "#003300");
        g.addColorStop(1, "#000000");
        ctx.fillStyle = g;
        ctx.fillRect(0, 0, W, H);

        stars.forEach((s) => {
          ctx.beginPath();
          ctx.fillStyle = "rgba(180,255,200,0.9)";
          ctx.shadowColor = "#00ff99";
          ctx.shadowBlur = 10;
          ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
          ctx.fill();
        });

        ctx.shadowBlur = 0;
      }

      window.addEventListener("resize", fit);
      fit();
    </script>
  </body>
</html>
